{% extends "base.html" %}

{% block title %}Edit Application - Cognizant SecArch Portal{% endblock %}

{% block content %}
<div class="row justify-content-center">
	<div class="col-md-8">
		<div class="card">
			<div class="card-header">
				<h4><i class="fas fa-edit"></i> Edit Application</h4>
			</div>
			<div class="card-body">
				<form method="POST" enctype="multipart/form-data">
					<div class="row">
						<div class="col-md-6">
							<div class="mb-3">
								<label for="name" class="form-label">Application Name *</label>
								<input type="text" class="form-control" id="name" name="name" value="{{ application.name }}" required>
							</div>
						</div>
						<div class="col-md-6">
							<div class="mb-3">
								<label for="deployment_environment" class="form-label">Deployment Environment *</label>
								<select class="form-control" id="deployment_environment" name="deployment_environment" required>
									<option value="development" {{ 'selected' if application.deployment_environment=='development' else '' }}>Development</option>
									<option value="staging" {{ 'selected' if application.deployment_environment=='staging' else '' }}>Staging</option>
									<option value="production" {{ 'selected' if application.deployment_environment=='production' else '' }}>Production</option>
									<option value="hybrid" {{ 'selected' if application.deployment_environment=='hybrid' else '' }}>Hybrid</option>
								</select>
							</div>
						</div>
					</div>

					<div class="mb-3">
						<label for="description" class="form-label">Description</label>
						<textarea class="form-control" id="description" name="description" rows="3">{{ application.description or '' }}</textarea>
					</div>

					<div class="row">
						<div class="col-md-6">
							<div class="mb-3">
								<label for="business_criticality" class="form-label">Business Criticality *</label>
								<select class="form-select" id="business_criticality" name="business_criticality" required>
									{% for opt in ['Critical','High','Medium','Low'] %}
									<option value="{{ opt }}" {{ 'selected' if application.business_criticality==opt else '' }}>{{ opt }}</option>
									{% endfor %}
								</select>
							</div>
						</div>
						<div class="col-md-6">
							<div class="mb-3">
								<label for="data_classification" class="form-label">Data Classification *</label>
								<select class="form-control" id="data_classification" name="data_classification" required>
									{% for opt in ['Public','Internal','Confidential','Restricted'] %}
									<option value="{{ opt }}" {{ 'selected' if application.data_classification==opt else '' }}>{{ opt }}</option>
									{% endfor %}
								</select>
							</div>
						</div>
					</div>

					<!-- Cloud Review -->
					<div class="mb-3">
						<label class="form-label fw-semibold">Cloud Review Required?</label>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="cloud_review_required" value="yes" id="cloud_yes" {{ 'checked' if application.cloud_review_required=='yes' else '' }}>
							<label class="form-check-label" for="cloud_yes">Yes</label>
						</div>
						<div class="form-check form-check-inline">
							<input class="form-check-input" type="radio" name="cloud_review_required" value="no" id="cloud_no" {{ 'checked' if application.cloud_review_required!='yes' else '' }}>
							<label class="form-check-label" for="cloud_no">No</label>
						</div>
					</div>
					<div class="mb-3">
						<label class="form-label">Cloud Providers</label>
						{% set cloud_selected = (application.cloud_providers or '').split(',') %}
						<div class="row g-2">
							{% for provider in ['AWS','Azure','GCP'] %}
							<div class="col-md-4">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" name="cloud_providers" value="{{ provider }}" id="cloud_{{ provider|lower }}" {{ 'checked' if provider in cloud_selected else '' }}>
									<label class="form-check-label" for="cloud_{{ provider|lower }}">{{ provider }}</label>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>

					<!-- Database Review fields removed per requirement -->

					<!-- Technology Stack -->
					<div class="mb-3">
						<label class="form-label">Technology Stack</label>
						{% set tech_selected = (application.technology_stack or '').split(',') %}
						<div class="row">
							{% for tech in ['JavaScript','Python','Java','C#','React','Angular','Vue.js','PHP','MySQL','PostgreSQL','MongoDB','Docker'] %}
							<div class="col-md-4">
								<div class="form-check">
									<input class="form-check-input" type="checkbox" name="technology_stack" value="{{ tech }}" id="tech_{{ loop.index }}" {{ 'checked' if tech in tech_selected else '' }}>
									<label class="form-check-label" for="tech_{{ loop.index }}">{{ tech }}</label>
								</div>
							</div>
							{% endfor %}
						</div>
					</div>

					<hr>
					<div class="d-flex justify-content-between">
						<a href="{{ url_for('web_applications') }}" class="btn btn-secondary">
							<i class="fas fa-arrow-left"></i> Cancel
						</a>
						<button type="submit" class="btn btn-primary">
							<i class="fas fa-save"></i> Save Changes
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock %} 